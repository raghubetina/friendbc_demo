<li class="media">
  <div class="pull-left">
    <%= image_tag "https://graph.facebook.com/#{post['from']['id']}/picture", class: 'media-object' %>
  </div>
  <div class="media-body">
    <h2 class="media-heading">
      <%= post['from']['name'] %>
      <small><%= time_ago_in_words(post['created_time']) %> ago</small>
    </h2>
    <p class="lead"><%= post['message'] %></p>
    <% parsed_url = URI.parse(post['link']) %>
    <% if parsed_url.host.include?('youtube') %>
      <% query_params = Rack::Utils.parse_query(parsed_url.query) %>
      <iframe width="853" height="505" src="//www.youtube.com/embed/<%= query_params['v'] %>" frameborder="0" allowfullscreen></iframe>
    <% else %>
      <%= link_to "Click here to watch on #{parsed_url.host} <i class=\"icon-external-link\"></i>".html_safe, post['link'], target: '_blank', class: 'btn btn-primary btn-large' %>
    <% end %>
    <% if post['comments'].present? %>
      <% post['comments']['data'].each do |comment| %>
        <div class="media">
          <div class="pull-left">
            <%= image_tag "https://graph.facebook.com/#{comment['from']['id']}/picture", class: 'media-object' %>
          </div>
          <div class="media-body">
            <h4 class="media-heading">
              <%= comment['from']['name'] %>
              <small><%= time_ago_in_words(comment['created_time']) %> ago</small>
            </h4>
            <p><%= comment['message'] %></p>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <hr>
</li>
